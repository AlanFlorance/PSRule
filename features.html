<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PSRule features </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PSRule features ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="scenarios/toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="psrule-features">PSRule features</h1>

<p>The following sections describe key features of PSRule.</p>
<ul>
<li><a href="#extensible">Extensible</a></li>
<li><a href="#cross-platform">Cross-platform</a></li>
<li><a href="#reusable">Reusable</a></li>
<li><a href="#recommendations">Recommendations</a></li>
</ul>
<h2 id="extensible">Extensible</h2>
<p>Authors define rules using PowerShell, a flexible scripting language.
If you or your team already can write a basic PowerShell script, you can already define a rule.
What's more, you can tap into a large world-wide community of PowerShell users with scripts and cmdlets to help you build out rules quickly.</p>
<p>In addition to PowerShell, PSRule adds domain specific language (DSL) keywords, cmdlets, and variables.
These features can optionally be used to reduce the code you have to write for common scenarios.
For example: checking that a property exists, or providing a reason why the validation failed.</p>
<h2 id="cross-platform">Cross-platform</h2>
<p>PSRule uses modern PowerShell libraries at its core, allowing it to go anywhere PowerShell can go.
The companion extension for Visual Studio Code provides snippets for authoring rules and documentation.
PSRule runs on MacOS, Linux, and Windows.</p>
<p>PowerShell makes it easy to integrate PSRule into popular continuous integration (CI) systems.
Additionally, PSRule has extensions for:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=bewhite.ps-rule">Azure Pipeline (Azure DevOps)</a></li>
<li><a href="https://github.com/marketplace/actions/psrule">GitHub Actions (GitHub)</a></li>
</ul>
<p>To install, use the <code>Install-Module</code> cmdlet within PowerShell.
For installation options see <a href="install-instructions.html">install instructions</a>.</p>
<h2 id="reusable">Reusable</h2>
<p>Define rules once then reuse and share rules across teams or organizations.
The following built-in features improve portability:</p>
<ul>
<li><a href="concepts/PSRule/en-US/about_PSRule_Options.html">Configuration</a> - PSRule and rules can be configured.</li>
<li><a href="concepts/PSRule/en-US/about_PSRule_Baseline.html">Baselines</a> - An artifact containing rules and configuration for a scenario.</li>
<li><a href="concepts/PSRule/en-US/about_PSRule_Options.html#suppression">Suppression</a> - Handle exceptions to a rule.</li>
<li><a href="concepts/PSRule/en-US/about_PSRule_Docs.html">Documentation</a> - Provide detailed guidance to resolve issues.</li>
</ul>
<p>Rules can be packaged up into a module then distributed.</p>
<p>PSRule uses PowerShell modules as the standard way to distribute rules.
Modules containing rules can be published on the PowerShell Gallery or network share using the same process as regular PowerShell modules.</p>
<p>For a walk through see <a href="scenarios/rule-module/rule-module.html">Packaging rules in a module</a>.</p>
<h2 id="recommendations">Recommendations</h2>
<p>PSRule allows rule authors to define recommendations in markdown.
This allows not only the cause of the issue to be identified but detailed instructions to be included to remediate issues.</p>
<p>For more information see <a href="concepts/PSRule/en-US/about_PSRule_Docs.html">about_PSRule_Docs</a>.</p>
<h2 id="frequently-asked-questions-faq">Frequently Asked Questions (FAQ)</h2>
<h3 id="how-is-psrule-different-to-pester">How is PSRule different to Pester?</h3>
<p>PSRule is a framework for validating infrastructure as code (IaC) and objects using PowerShell.
Some features include:</p>
<ul>
<li><strong>Objects</strong> - PowerShell objects can be validated on the pipeline or imported.
<ul>
<li>Objects can be <a href="concepts/PSRule/en-US/about_PSRule_Options.html#inputformat">imported</a> directly from <code>JSON</code>, <code>YAML</code>, or <code>.psd1</code>.</li>
<li>Each object is automatically bound to a <em>target type</em> for use with pre-conditions.</li>
<li>Rule results are orientated to validating an object.</li>
<li>Built-in <a href="concepts/PSRule/en-US/about_PSRule_Assert.html">assertions</a>, automatically traverse object properties.</li>
</ul>
</li>
<li><strong>Pre-conditions</strong> - Rules understand which objects they apply to.
Objects are bound to a type as they are processed using object properties.
Dissimilar objects can be processed quickly.
<ul>
<li>Objects that match no rules are flagged with a warning by default.</li>
</ul>
</li>
<li><strong>Packaging</strong> - Rules can be reused between projects and optionally packaged into a module.
<ul>
<li>Portable rules, configuration, baselines, and documentation allow greater reuse and distribution.</li>
<li><a href="concepts/PSRule/en-US/about_PSRule_Docs.html">Documentation</a> with detailed guidance or next steps can be included.</li>
<li>Standalone or rules from modules can be combined together with <code>-Module</code> and <code>-Path</code>.</li>
</ul>
</li>
<li><strong>Configuration</strong> - <a href="concepts/PSRule/en-US/about_PSRule_Options.html#configuration">Configuration</a> of rules is handled by PSRule.
<ul>
<li>Rules can be configured at runtime, from YAML configuration, or environment variables.</li>
<li><a href="concepts/PSRule/en-US/about_PSRule_Baseline.html">Baselines</a> can be used to pair rules and configuration for a specific scenario.</li>
</ul>
</li>
<li><strong>Exceptions</strong> - Exceptions to a rule can be ignored for a single object using <a href="concepts/PSRule/en-US/about_PSRule_Options.html#suppression">suppression</a>.
<ul>
<li>Exclusion can be used additionally to ignore a rule entirely.</li>
</ul>
</li>
</ul>
<p>These features make PSRule ideal for validating:</p>
<ul>
<li>Infrastructure as code, including:
<ul>
<li>Kubernetes manifests.</li>
<li>Azure Resource Manager templates.</li>
<li>Configuration files.</li>
<li>Pipeline files.</li>
</ul>
</li>
<li>Deployments or configurations against a baseline.</li>
</ul>
<p>If you want to test PowerShell code, consider using Pester, we do!</p>
<h3 id="what-pre-built-modules-are-available-for-psrule">What pre-built modules are available for PSRule?</h3>
<p>PSRule rules modules can be found on the <a href="https://www.powershellgallery.com/packages?q=Tags%3A%22PSRule-rules%22">PowerShell Gallery</a> using the tag <code>PSRule-rules</code>.</p>
<h3 id="how-do-i-configure-psrule">How do I configure PSRule?</h3>
<p>PSRule and rules can be configured by:</p>
<ul>
<li><strong>Parameter</strong> - PSRule can be configured at runtime by passing the <code>-Option</code> parameter to cmdlets.</li>
<li><strong>Options file</strong> - Options stored in YAML are load configuration from file.
The default <code>ps-rule.yaml</code> option file is read automatically from the current working path by default.
When checking into source control, store this file in the root directory of the repository.</li>
<li><strong>Environment variables</strong> - Configuration can be specified using environment variables.</li>
</ul>
<p>For example:</p>
<pre><code class="lang-powershell"># With cmdlet
$option = New-PSRuleOption -OutputAs Summary -OutputCulture 'en-AU' -NotProcessedWarning $False -Configuration @{
  CUSTOM_VALUE = 'example'
}
$items | Assert-PSRule -Option $option

# With hashtable
$items | Assert-PSRule -Option @{
  'Output.As' = 'Summary'
  'Output.Culture' = 'en-AU'
  'Execution.NotProcessedWarning' = $False
  'Configuration.CUSTOM_VALUE' = 'Example'
}
</code></pre>
<pre><code class="lang-yaml"># With YAML
output:
  as: Summary
  culture: [ 'en-AU' ]

execution:
  notProcessedWarning: false

configuration:
  CUSTOM_VALUE: Example
</code></pre>
<pre><code class="lang-bash"># With environment variable in bash
export PSRULE_EXECUTION_NOTPROCESSEDWARNING=false
export PSRULE_OUTPUT_AS=Summary
export PSRULE_OUTPUT_CULTURE=en-AU
export PSRULE_CONFIGURATION_CUSTOM_VALUE=Example
</code></pre>
<p>For a list of configuration options and usage see <a href="concepts/PSRule/en-US/about_PSRule_Options.html">about_PSRule_Options</a>.</p>
<h3 id="how-do-i-ignore-a-rule">How do I ignore a rule?</h3>
<p>To prevent a rule executing you can either:</p>
<ul>
<li>Exclude the rule - The rule is not executed for any object.</li>
<li>Suppress the rule - The rule is not executed for a specific object by name.</li>
</ul>
<p>To exclude a rule use the <code>Rule.Exclude</code> option.
To do this in YAML, add the following to the <code>ps-rule.yaml</code> options file.</p>
<pre><code class="lang-yaml"># YAML: Using the rule/exclude property
rule:
  exclude:
  - 'My.FirstRule'  # The name of the first rule to exclude.
  - 'My.SecondRule' # The name of the second rule to exclude.
</code></pre>
<p>To suppress a rule use the <code>Suppression</code> option.
To do this in YAML, add the following to the <code>ps-rule.yaml</code> options file.</p>
<pre><code class="lang-yaml"># YAML: Using the suppression property
suppression:
  My.FirstRule:    # The name of the rule being suppressed
  - TestObject1    # The name of the first object to suppress
  - TestObject3    # The name of the second object to suppress
  My.SecondRule:   # An additional rule to suppress
  - TestObject2
</code></pre>
<p>The name of the object is reported by PSRule in output results.</p>
<p>See <a href="concepts/PSRule/en-US/about_PSRule_Options.html">about_PSRule_Options</a> for additional usage for both of these options.</p>
<h3 id="how-do-i-layer-on-custom-rules-on-top-of-an-existing-module">How do I layer on custom rules on top of an existing module?</h3>
<p>PSRule allows rules from modules and standalone <em>(loose)</em> rules to be run together.</p>
<p>To run rules from a standalone path use:</p>
<pre><code class="lang-powershell"># Note: .ps-rule/ is a standard path to include standalone rules.

# With input from the pipeline
$items | Assert-PSRule -Path '.ps-rule/'

# With input from file
Assert-PSRule -Path '.ps-rule/' -InputPath 'src/'
</code></pre>
<p>To run rules from an installed module use:</p>
<pre><code class="lang-powershell"># With input from the pipeline
$items | Assert-PSRule -Module 'PSRule.Rules.Azure'

# With input from file
Assert-PSRule -Module 'PSRule.Rules.Azure' -InputPath 'src/'
</code></pre>
<p>Combining both:</p>
<pre><code class="lang-powershell">Assert-PSRule -Module 'PSRule.Rules.Azure', 'PSRule.Rules.CAF' -Path '.ps-rule/' -InputPath 'src/'
</code></pre>
<h3 id="why-should-i-use-psrule-keywords-and-assertions">Why should I use PSRule keywords and assertions?</h3>
<p>Except for the <code>Rule</code> keyword, using the built-in language features are optional.</p>
<p>The built-in keywords and assertions accelerate rule creation.
They do this by providing a condition and a set of reasons in a single command.</p>
<p>Reasons are also optional; however, they provide additional context as to why the rule failed.
Alternatively, you can provide your own reasons to complement standard PowerShell with the <code>Reason</code> keyword.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/PSRule/blob/main/docs/features.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
