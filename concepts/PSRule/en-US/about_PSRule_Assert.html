<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PSRule_Assert </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PSRule_Assert ">
    <meta name="generator" content="docfx 2.56.1.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../../commands/PSRule/en-US/toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="psrule_assert">PSRule_Assert</h1>

<h2 id="about_psrule_assert">about_PSRule_Assert</h2>
<h2 id="short-description">SHORT DESCRIPTION</h2>
<p>Describes the assertion helper that can be used within PSRule rule definitions.</p>
<h2 id="long-description">LONG DESCRIPTION</h2>
<p>PSRule includes an assertion helper exposed as a built-in variable <code>$Assert</code>.
The <code>$Assert</code> object provides a consistent set of methods to evaluate objects.</p>
<p>Each <code>$Assert</code> method returns an <code>AssertResult</code> object that contains the result of the assertion.</p>
<p>The following built-in assertion methods are provided:</p>
<ul>
<li><a href="#contains">Contains</a> - The field value must contain at least one of the strings.</li>
<li><a href="#endswith">EndsWith</a> - The field value must match at least one suffix.</li>
<li><a href="#greater">Greater</a> - The field value must be greater.</li>
<li><a href="#greaterorequal">GreaterOrEqual</a> - The field value must be greater or equal to.</li>
<li><a href="#hasdefaultvalue">HasDefaultValue</a> - The object should not have the field or the field value is set to the default value.</li>
<li><a href="#hasfield">HasField</a> - The object must have the specified field.</li>
<li><a href="#hasfieldvalue">HasFieldValue</a> - The object must have the specified field and that field is not empty.</li>
<li><a href="#hasjsonschema">HasJsonSchema</a> - The object must reference a JSON schema with the <code>$schema</code> field.</li>
<li><a href="#in">In</a> - The field value must be included in the set.</li>
<li><a href="#jsonschema">JsonSchema</a> - The object must validate successfully against a JSON schema.</li>
<li><a href="#less">Less</a> - The field value must be less.</li>
<li><a href="#lessorequal">LessOrEqual</a> - The field value must be less or equal to.</li>
<li><a href="#match">Match</a> - The field value matches a regular expression pattern.</li>
<li><a href="#notin">NotIn</a> - The field value must not be included in the set.</li>
<li><a href="#notmatch">NotMatch</a> - The field value does not match a regular expression pattern.</li>
<li><a href="#nullorempty">NullOrEmpty</a> - The object must not have the specified field or it must be empty.</li>
<li><a href="#startswith">StartsWith</a> - The field value must match at least one prefix.</li>
<li><a href="#version">Version</a> - The field value must be a semantic version string.</li>
</ul>
<p>The <code>$Assert</code> variable can only be used within a rule definition block or script pre-conditions.</p>
<h3 id="using-assertion-methods">Using assertion methods</h3>
<p>An assertion method can be used like other methods in PowerShell. i.e. <code>$Assert.methodName(parameters)</code>.</p>
<p>Assertion methods use the following standard pattern:</p>
<ul>
<li>The first parameter is <em>always</em> the input object of type <code>PSObject</code>, additional parameters can be included based on the functionality required by the method.
<ul>
<li>In many cases the input object will be <code>$TargetObject</code>, however assertion methods must not assume that <code>$TargetObject</code> will be used.</li>
<li>Assertion methods must accept a <code>$Null</code> input object.</li>
</ul>
</li>
<li>Assertion methods return the <code>AssertResult</code> object that is interpreted by the rule pipeline.</li>
</ul>
<p>Some assertion methods may overlap or provide similar functionality to built-in keywords.
Where you have the choice, use built-in keywords.
Use assertion methods for advanced cases or increased flexibility.</p>
<p>In the following example, <code>Assert.HasFieldValue</code> asserts that <code>$TargetObject</code> should have a field named <code>Type</code> with a non-empty value.</p>
<pre><code class="lang-powershell">Rule 'Assert.HasTypeField' {
    $Assert.HasFieldValue($TargetObject, 'Type')
}
</code></pre>
<p>To find perform multiple assertions use.</p>
<pre><code class="lang-powershell">Rule 'Assert.HasRequiredFields' {
    $Assert.HasFieldValue($TargetObject, 'Name')
    $Assert.HasFieldValue($TargetObject, 'Type')
    $Assert.HasFieldValue($TargetObject, 'Value')
}
</code></pre>
<h3 id="field-names">Field names</h3>
<p>Many of the built-in assertion methods accept a field name.
The field name is an expression that traverses object properties, keys or indexes of the <em>input object</em>.</p>
<p>The field name can contain:</p>
<ul>
<li>Property names for PSObjects or .NET objects.</li>
<li>Keys for hash table or dictionaries.</li>
<li>Indexes for arrays or collections.</li>
</ul>
<p>For example:</p>
<ul>
<li><code>.</code> refers to <em>input object</em> itself.</li>
<li><code>Name</code> or <code>.Name</code> refers to the name property/ key of the <em>input object</em>.</li>
<li><code>Properties.enabled</code> refers to the enabled property under the Properties property.</li>
<li><code>Tags.env</code> refers to the env key under a hash table property of the <em>input object</em>.</li>
<li><code>Properties.securityRules[0].name</code> references to the name property of the first security rule.</li>
</ul>
<h3 id="contains">Contains</h3>
<p>The <code>Contains</code> assertion method checks the field value contains with the specified string.
Optionally a case-sensitive compare can be used, however case is ignored by default.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>text</code> - One or more strings to compare the field value with. Only one string must match.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The field value '{0}' is not a string.</em></li>
<li><em>The field '{0}' does not contain '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'Contains' {
    $Assert.Contains($TargetObject, 'ResourceGroupName', 'prod')
    $Assert.Contains($TargetObject, 'Name', @('prod', 'test'), $True)
}
</code></pre>
<h3 id="endswith">EndsWith</h3>
<p>The <code>EndsWith</code> assertion method checks the field value ends with the specified suffix.
Optionally a case-sensitive compare can be used, however case is ignored by default.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><p><code>inputObject</code> - The object being checked for the specified field.</p>
</li>
<li><p><code>field</code> - The name of the field to check. This is a case insensitive compare.</p>
</li>
<li><p><code>suffix</code> - One or more suffixes to compare the field value with. Only one suffix must match.</p>
</li>
<li><p><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</p>
</li>
<li><p><em>The parameter 'inputObject' is null.</em></p>
</li>
<li><p><em>The parameter 'field' is null or empty.</em></p>
</li>
<li><p><em>The field '{0}' does not exist.</em></p>
</li>
<li><p><em>The field value '{0}' is not a string.</em></p>
</li>
<li><p><em>The field '{0}' does not end with '{1}'.</em></p>
</li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'EndsWith' {
    $Assert.EndsWith($TargetObject, 'ResourceGroupName', 'eus')
    $Assert.EndsWith($TargetObject, 'Name', @('db', 'web'), $True)
}
</code></pre>
<h3 id="greater">Greater</h3>
<p>The <code>Greater</code> assertion method checks the field value is greater than the specified value.
The field value can either be an integer, float, array, or string.
When the field value is:</p>
<ul>
<li>An integer or float, a numerical comparison is used.</li>
<li>An array, the number of elements is compared.</li>
<li>A string, the length of the string is compared.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>value</code> - A integer to compare the field value against.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The value '{0}' was not &gt; '{1}'.</em></li>
<li><em>The field value '{0}' can not be compared with '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'Greater' {
    $Assert.Greater($TargetObject, 'value', 3)
}
</code></pre>
<h3 id="greaterorequal">GreaterOrEqual</h3>
<p>The <code>GreaterOrEqual</code> assertion method checks the field value is greater or equal to the specified value.
The field value can either be an integer, float, array, or string.
When the field value is:</p>
<ul>
<li>An integer or float, a numerical comparison is used.</li>
<li>An array, the number of elements is compared.</li>
<li>A string, the length of the string is compared.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>value</code> - A integer to compare the field value against.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The value '{0}' was not &gt;= '{1}'.</em></li>
<li><em>The field value '{0}' can not be compared with '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'GreaterOrEqual' {
    $Assert.GreaterOrEqual($TargetObject, 'value', 3)
}
</code></pre>
<h3 id="hasdefaultvalue">HasDefaultValue</h3>
<p>The <code>HasDefaultValue</code> assertion method check that the field does not exist or the field value is set to the default value.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>defaultValue</code> - The expected value if the field exists.</li>
</ul>
<p>This assertion will pass if:</p>
<ul>
<li>The field does not exist.</li>
<li>The field value is set to <code>defaultValue</code>.</li>
</ul>
<p>This assertion will fail if:</p>
<ul>
<li>The field value is set to a value different from <code>defaultValue</code>.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' is set to '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'HasDefaultValue' {
    $Assert.HasDefaultValue($TargetObject, 'Properties.osProfile.linuxConfiguration.provisionVMAgent', $True)
}
</code></pre>
<h3 id="hasfield">HasField</h3>
<p>The <code>HasField</code> assertion method checks the object has the specified field.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. By default, a case insensitive compare is used.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field name.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'HasField' {
    $Assert.HasField($TargetObject, 'Name')
    $Assert.HasField($TargetObject, 'tag.Environment', $True)
}
</code></pre>
<h3 id="hasfieldvalue">HasFieldValue</h3>
<p>The <code>HasFieldValue</code> assertion method checks the field value of the object is not empty.</p>
<p>A field value is empty if any of the following are true:</p>
<ul>
<li>The field does not exist.</li>
<li>The field value is <code>$Null</code>.</li>
<li>The field value is an empty array or collection.</li>
<li>The field value is an empty string <code>''</code>.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>expectedValue</code> (optional) - Check that the field value is set to a specific value. To check <code>$Null</code> use <code>NullOrEmpty</code> instead. If <code>expectedValue</code> is <code>$Null</code> the field value will not be compared.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The value of '{0}' is null or empty.</em></li>
<li><em>The field '{0}' is set to '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'HasFieldValue' {
    $Assert.HasFieldValue($TargetObject, 'Name')
    $Assert.HasFieldValue($TargetObject, 'tag.Environment', 'production')
}
</code></pre>
<h3 id="hasjsonschema">HasJsonSchema</h3>
<p>The <code>HasJsonSchema</code> assertion method determines if the input object has a <code>$schema</code> property defined.
If the <code>$schema</code> property is defined, it must match one of the supplied schemas.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being compared.</li>
<li><code>uri</code> - Optional. When specified, the object being compared must have a <code>$schema</code> property set to one of the specified schemas.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The field '$schema' does not exist.</em></li>
<li><em>The field value '$schema' is not a string.</em></li>
<li><em>None of the specified schemas match '{0}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'HasFieldValue' {
    $Assert.HasJsonSchema($TargetObject)
    $Assert.HasJsonSchema($TargetObject, &quot;http://json-schema.org/draft-07/schema`#&quot;)
}
</code></pre>
<h3 id="jsonschema">JsonSchema</h3>
<p>The <code>JsonSchema</code> assertion method compares the input object against a defined JSON schema.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being compared against the JSON schema.</li>
<li><code>uri</code> - A URL or file path to a JSON schema file formatted as UTF-8.
Either a file path or URL can be used to specify the location of the schema file.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'uri' is null or empty.</em></li>
<li><em>The JSON schema '{0}' could not be found.</em></li>
<li><em>Failed schema validation on {0}. {1}</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'JsonSchema' {
    $Assert.JsonSchema($TargetObject, 'tests/PSRule.Tests/FromFile.Json.schema.json')
}
</code></pre>
<h3 id="in">In</h3>
<p>The <code>In</code> assertion method checks the field value is included in a set of values.
The field value can either be an integer, float, array, or string.
When the field value is an array, only one item must be included in the set.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>values</code> - An array of one or more values that the field value is compared against.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The field value '{0}' was not included in the set.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'In' {
    $Assert.In($TargetObject, 'Sku.tier', @('PremiumV2', 'Premium', 'Standard'))
    $Assert.In($TargetObject, 'Sku.tier', @('PremiumV2', 'Premium', 'Standard'), $True)
}
</code></pre>
<h3 id="less">Less</h3>
<p>The <code>Less</code> assertion method checks the field value is less than the specified value.
The field value can either be an integer, float, array, or string.
When the field value is:</p>
<ul>
<li>An integer or float, a numerical comparison is used.</li>
<li>An array, the number of elements is compared.</li>
<li>A string, the length of the string is compared.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>value</code> - A integer to compare the field value against.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The value '{0}' was not &lt; '{1}'.</em></li>
<li><em>The field value '{0}' can not be compared with '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'Less' {
    $Assert.Less($TargetObject, 'value', 3)
}
</code></pre>
<h3 id="lessorequal">LessOrEqual</h3>
<p>The <code>LessOrEqual</code> assertion method checks the field value is less or equal to the specified value.
The field value can either be an integer, float, array, or string.
When the field value is:</p>
<ul>
<li>An integer or float, a numerical comparison is used.</li>
<li>An array, the number of elements is compared.</li>
<li>A string, the length of the string is compared.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>value</code> - A integer to compare the field value against.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The value '{0}' was not &lt;= '{1}'.</em></li>
<li><em>The field value '{0}' can not be compared with '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'LessOrEqual' {
    $Assert.LessOrEqual($TargetObject, 'value', 3)
}
</code></pre>
<h3 id="match">Match</h3>
<p>The <code>Match</code> assertion method checks the field value matches a regular expression pattern.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>pattern</code> - A regular expression pattern to match.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The field value '{0}' is not a string.</em></li>
<li><em>The field value '{0}' does not match the pattern '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'Match' {
    $Assert.Match($TargetObject, 'value', '^[a-z]*$')
    $Assert.Match($TargetObject, 'value', '^[a-z]*$', $True)
}
</code></pre>
<h3 id="notin">NotIn</h3>
<p>The <code>NotIn</code> assertion method checks the field value is not in a set of values.
The field value can either be an integer, array, float, or string.
When the field value is an array, none of the items must be included in the set.
If the field does not exist at all, it is not in the set and passes.
To check the field exists combine this assertion method with <code>HasFieldValue</code>.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>values</code> - An array of one or more values that the field value is compared against.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field value '{0}' was in the set.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'In' {
    $Assert.NotIn($TargetObject, 'Sku.tier', @('Free', 'Shared', 'Basic'))
    $Assert.NotIn($TargetObject, 'Sku.tier', @('Free', 'Shared', 'Basic'), $True)
}
</code></pre>
<h3 id="notmatch">NotMatch</h3>
<p>The <code>NotMatch</code> assertion method checks the field value does not match a regular expression pattern.
If the field does not exist at all, it does not match and passes.
To check the field exists combine this assertion method with <code>HasFieldValue</code>.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>pattern</code> - A regular expression pattern to match.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field value '{0}' is not a string.</em></li>
<li><em>The field value '{0}' matches the pattern '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'NotMatch' {
    $Assert.NotMatch($TargetObject, 'value', '^[a-z]*$')
    $Assert.NotMatch($TargetObject, 'value', '^[a-z]*$', $True)
}
</code></pre>
<h3 id="nullorempty">NullOrEmpty</h3>
<p>The <code>NullOrEmpty</code> assertion method checks the field value of the object is null or empty.</p>
<p>A field value is null or empty if any of the following are true:</p>
<ul>
<li>The field does not exist.</li>
<li>The field value is <code>$Null</code>.</li>
<li>The field value is an empty array or collection.</li>
<li>The field value is an empty string <code>''</code>.</li>
</ul>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' is not empty.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'NullOrEmpty' {
    $Assert.NullOrEmpty($TargetObject, 'Name')
    $Assert.NullOrEmpty($TargetObject, 'tag.Environment')
}
</code></pre>
<h3 id="startswith">StartsWith</h3>
<p>The <code>StartsWith</code> assertion method checks the field value starts with the specified prefix.
Optionally a case-sensitive compare can be used, however case is ignored by default.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>prefix</code> - One or more prefixes to compare the field value with. Only one prefix must match.</li>
<li><code>caseSensitive</code> (optional) - Use a case sensitive compare of the field value. Case is ignored by default.</li>
</ul>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The field value '{0}' is not a string.</em></li>
<li><em>The field '{0}' does not start with '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'StartsWith' {
    $Assert.StartsWith($TargetObject, 'ResourceGroupName', 'rg-')
    $Assert.StartsWith($TargetObject, 'Name', @('st', 'diag'), $True)
}
</code></pre>
<h3 id="version">Version</h3>
<p>The <code>Version</code> assertion method checks the field value is a valid semantic version.
A constraint can optionally be provided to require the semantic version to be within a range.</p>
<p>The following parameters are accepted:</p>
<ul>
<li><code>inputObject</code> - The object being checked for the specified field.</li>
<li><code>field</code> - The name of the field to check. This is a case insensitive compare.</li>
<li><code>constraint</code> (optional) - A version constraint, see below for details of version constrain format.</li>
</ul>
<p>The following are supported constraints:</p>
<ul>
<li><code>version</code> - Must match version exactly. This also accepts the following prefixes; <code>=</code>, <code>v</code>, <code>V</code>.
<ul>
<li>e.g. <code>1.2.3</code>, <code>=1.2.3</code></li>
</ul>
</li>
<li><code>&gt;version</code> - Must be greater than version.
<ul>
<li>e.g. <code>&gt;1.2.3</code></li>
</ul>
</li>
<li><code>&gt;=version</code> - Must be greater than or equal to version.
<ul>
<li>e.g. <code>&gt;=1.2.3</code></li>
</ul>
</li>
<li><code>&lt;version</code> - Must be less than version.
<ul>
<li>e.g. <code>&lt;1.2.3</code></li>
</ul>
</li>
<li><code>&lt;=version</code> - Must be less than or equal to version.
<ul>
<li>e.g. <code>&lt;=1.2.3</code></li>
</ul>
</li>
<li><code>^version</code> - Compatible with version.
<ul>
<li>e.g. <code>^1.2.3</code> - &gt;=1.2.3, &lt;2.0.0</li>
</ul>
</li>
<li><code>~version</code> - Approximately equivalent to version
<ul>
<li>e.g. <code>~1.2.3</code> - &gt;=1.2.3, &lt;1.3.0</li>
</ul>
</li>
</ul>
<p>An empty, null or <code>*</code> version constraint matches all valid semantic versions.</p>
<p>Reasons include:</p>
<ul>
<li><em>The parameter 'inputObject' is null.</em></li>
<li><em>The parameter 'field' is null or empty.</em></li>
<li><em>The field '{0}' does not exist.</em></li>
<li><em>The field value '{0}' is not a version string.</em></li>
<li><em>The version '{0}' does not match the constraint '{1}'.</em></li>
</ul>
<p>Examples:</p>
<pre><code class="lang-powershell">Rule 'ValidVersion' {
    $Assert.Version($TargetObject, 'version')
}

Rule 'MinimumVersion' {
    $Assert.Version($TargetObject, 'version', '&gt;=1.2.3')
}
</code></pre>
<h3 id="advanced-usage">Advanced usage</h3>
<p>The <code>AssertResult</code> object returned from assertion methods:</p>
<ul>
<li>Handles pass/ fail conditions and collection of reason information.</li>
<li>Allows rules to implement their own handling or forward it up the stack to affect the rule outcome.</li>
</ul>
<p>The following properties are available:</p>
<ul>
<li><code>Result</code> - Either <code>$True</code> (Pass) or <code>$False</code> (Fail).</li>
</ul>
<p>The following methods are available:</p>
<ul>
<li><code>AddReason(&lt;string&gt; text)</code> - Can be used to append additional reasons to the result.
A reason can only be set if the assertion failed.
Reason text should be localized before calling this method.
Localization can be done using the <code>$LocalizedData</code> automatic variable.</li>
<li><code>WithReason(&lt;string&gt; text, &lt;bool&gt; replace)</code> - Can be used to append or replace reasons on the result.
In addition, <code>WithReason</code> can be chained.</li>
<li><code>Reason(&lt;string&gt; text, params &lt;object[]&gt; args)</code> - Replaces the reason on the results with a formatted string.
This method can be chained.
For usage see examples below.</li>
<li><code>GetReason()</code> - Gets any reasons currently associated with the failed result.</li>
<li><code>Complete()</code> - Returns <code>$True</code> (Pass) or <code>$False</code> (Fail) to the rule record.
If the assertion failed, any reasons are automatically added to the rule record.
To read the result without adding reason to the rule record use the <code>Result</code> property.</li>
<li><code>Ignore()</code> - Ignores the result. Nothing future is returned and any reasons are cleared.
Use this method when implementing custom handling.</li>
</ul>
<p>Use of <code>Complete</code> is optional, uncompleted results are automatically completed after the rule has executed.
Uncompleted results may return reasons out of sequence.</p>
<p>Using these advanced methods is not supported in rule script pre-conditions.</p>
<p>In this example, <code>Complete</code> is used to find the first field with an empty value.</p>
<pre><code class="lang-powershell">Rule 'Assert.HasFieldValue' {
    $Assert.HasFieldValue($TargetObject, 'Name').Complete() -and
        $Assert.HasFieldValue($TargetObject, 'Type').Complete() -and
        $Assert.HasFieldValue($TargetObject, 'Value').Complete()
}
</code></pre>
<p>In this example, the built-in reason is replaced with a custom reason, and immediately returned.
The reason text is automatically formatted with any parameters provided.</p>
<pre><code class="lang-powershell">Rule 'Assert.HasCustomValue' {
    $Assert.
        HasDefaultValue($TargetObject, 'value', 'test').
        Reason('The field {0} is using a non-default value: {1}', 'value', $TargetObject.value)

    # With localized string
    $Assert.
        HasDefaultValue($TargetObject, 'value', 'test').
        Reason($LocalizedData.NonDefaultValue, 'value', $TargetObject.value)
}
</code></pre>
<h3 id="authoring-assertion-methods">Authoring assertion methods</h3>
<p>The following built-in helper methods are provided for working with <code>$Assert</code> when authoring new assertion methods:</p>
<ul>
<li><code>Create(&lt;bool&gt; condition, &lt;string&gt; reason)</code> - Returns a result either pass or fail assertion result.</li>
<li><code>Pass()</code> - Returns a pass assertion result.</li>
<li><code>Fail()</code> - Results a fail assertion result.</li>
<li><code>Fail(&lt;string&gt; reason, params &lt;object[]&gt; args)</code> - Results a fail assertion result with a custom reason.
Additional arguments can be provided to format the custom reason string.</li>
</ul>
<h2 id="note">NOTE</h2>
<p>An online version of this document is available at <a href="https://github.com/Microsoft/PSRule/blob/main/docs/concepts/PSRule/en-US/about_PSRule_Assert.md">https://github.com/Microsoft/PSRule/blob/main/docs/concepts/PSRule/en-US/about_PSRule_Assert.md</a>.</p>
<h2 id="see-also">SEE ALSO</h2>
<ul>
<li><a href="https://github.com/Microsoft/PSRule/blob/main/docs/concepts/PSRule/en-US/about_PSRule_Variables.md">about_PSRule_Variables</a></li>
</ul>
<h2 id="keywords">KEYWORDS</h2>
<ul>
<li>Assert</li>
<li>Contains</li>
<li>EndsWith</li>
<li>Greater</li>
<li>GreaterOrEqual</li>
<li>HasDefaultValue</li>
<li>HasField</li>
<li>HasFieldValue</li>
<li>JsonSchema</li>
<li>Less</li>
<li>LessOrEqual</li>
<li>NullOrEmpty</li>
<li>StartsWith</li>
<li>Version</li>
<li>Rule</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/PSRule/blob/main/docs/concepts/PSRule/en-US/about_PSRule_Assert.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
